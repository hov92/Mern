{"ast":null,"code":"import _objectSpread from\"/Users/dwaynehovington/Desktop/Mern/mern/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Link}from'react-router-dom';import{createOrder}from'../actions/orderActions';import CheckoutSteps from'../components/CheckoutSteps';import LoadingBox from'../components/LoadingBox';import MessageBox from'../components/MessageBox';import{ORDER_CREATE_RESET}from'../constants/orderConstants';function PlaceOrderScreen(props){var cart=useSelector(function(state){return state.cart;});if(!cart.paymentMethod){props.history.push('/payment');}var orderCreate=useSelector(function(state){return state.orderCreate;});var loading=orderCreate.loading,success=orderCreate.success,error=orderCreate.error,order=orderCreate.order;var toPrice=function toPrice(num){return Number(num.toFixed(2));};//5.123=>string\"5.12\"=>number 5.12 \ncart.itemsPrice=toPrice(cart.cartItems.reduce(function(a,c){return a+c.qty*c.price;},0));cart.shippingPrice=cart.itemsPrice>100?toPrice(0):toPrice(10);cart.taxPrice=toPrice(0.10*cart.itemsPrice);cart.totalPrice=cart.itemsPrice+cart.shippingPrice+cart.taxPrice;var dispatch=useDispatch();var placeorderHandler=function placeorderHandler(){dispatch(createOrder(_objectSpread(_objectSpread({},cart),{},{orderItems:cart.cartItems})));};useEffect(function(){if(success){props.history.push(\"/order\".concat(order._id));dispatch({type:ORDER_CREATE_RESET});}},[dispatch,order,props.history,success]);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(CheckoutSteps,{step1:true,step2:true,step3:true,step4:true}),/*#__PURE__*/React.createElement(\"div\",{className:\"row top\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"card  card-body\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Shipping\"),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"Name:\"),\" \",cart.shippingAddress.fullName,\" \",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"strong\",null,\"Address:\"),\" \",cart.shippingAddress.address,\",\",cart.shippingAddress.city,\", \",cart.shippingAddress.postalcode,\",\",cart.shippingAddress.country))),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"card  card-body\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Payment\"),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"Method:\"),\" \",cart.paymentMethod))),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"card  card-body\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Order Items\"),/*#__PURE__*/React.createElement(\"ul\",null,cart.cartItems.map(function(item){return/*#__PURE__*/React.createElement(\"li\",{key:item.product},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"img\",{src:item.image,alt:item.name,className:\"small\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"min-30\"},/*#__PURE__*/React.createElement(Link,{to:\"/product/\".concat(item.product)},item.name)),/*#__PURE__*/React.createElement(\"div\",null,item.qty,\" x $\",item.price,\" = $\",item.qty*item.price)));})))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card card-body\"},/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"h2\",null,\"Order Summary\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",null,\"Items\"),/*#__PURE__*/React.createElement(\"div\",null,\"$\",cart.itemsPrice.toFixed(2)))),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",null,\"Shipping\"),/*#__PURE__*/React.createElement(\"div\",null,\"$\",cart.shippingPrice.toFixed(2)))),\"                            \",/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",null,\"Taxes\"),/*#__PURE__*/React.createElement(\"div\",null,\"$\",cart.taxPrice.toFixed(2)))),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"Order Total\")),/*#__PURE__*/React.createElement(\"div\",null,\" \",/*#__PURE__*/React.createElement(\"strong\",null,\"$\",cart.totalPrice.toFixed(2))))),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"button\",{type:\"button\",onClick:placeorderHandler,className:\"primary block\",disabled:cart.cartItems.length===0},\"Place Order\")),loading&&/*#__PURE__*/React.createElement(LoadingBox,null),error&&/*#__PURE__*/React.createElement(MessageBox,{variant:\"danger\"},error))))));}export default PlaceOrderScreen;","map":{"version":3,"sources":["/Users/dwaynehovington/Desktop/Mern/mern/client/src/screens/PlaceOrderScreen.js"],"names":["React","useEffect","useDispatch","useSelector","Link","createOrder","CheckoutSteps","LoadingBox","MessageBox","ORDER_CREATE_RESET","PlaceOrderScreen","props","cart","state","paymentMethod","history","push","orderCreate","loading","success","error","order","toPrice","num","Number","toFixed","itemsPrice","cartItems","reduce","a","c","qty","price","shippingPrice","taxPrice","totalPrice","dispatch","placeorderHandler","orderItems","_id","type","shippingAddress","fullName","address","city","postalcode","country","map","item","product","image","name","length"],"mappings":"qKAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,WAAT,KAA4B,yBAA5B,CACA,MAAOC,CAAAA,aAAP,KAA0B,6BAA1B,CACA,MAAOC,CAAAA,UAAP,KAAuB,0BAAvB,CACA,MAAOC,CAAAA,UAAP,KAAuB,0BAAvB,CACA,OAASC,kBAAT,KAAmC,6BAAnC,CAEA,QAASC,CAAAA,gBAAT,CAA0BC,KAA1B,CAAiC,CAC7B,GAAMC,CAAAA,IAAI,CAAGT,WAAW,CAAC,SAACU,KAAD,QAAWA,CAAAA,KAAK,CAACD,IAAjB,EAAD,CAAxB,CACA,GAAI,CAACA,IAAI,CAACE,aAAV,CAAyB,CACrBH,KAAK,CAACI,OAAN,CAAcC,IAAd,CAAmB,UAAnB,EACH,CACD,GAAMC,CAAAA,WAAW,CAAGd,WAAW,CAAC,SAACU,KAAD,QAAWA,CAAAA,KAAK,CAACI,WAAjB,EAAD,CAA/B,CACA,GAAQC,CAAAA,OAAR,CAA2CD,WAA3C,CAAQC,OAAR,CAAiBC,OAAjB,CAA2CF,WAA3C,CAAiBE,OAAjB,CAA0BC,KAA1B,CAA2CH,WAA3C,CAA0BG,KAA1B,CAAiCC,KAAjC,CAA2CJ,WAA3C,CAAiCI,KAAjC,CACA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAACC,GAAD,QAASC,CAAAA,MAAM,CAACD,GAAG,CAACE,OAAJ,CAAY,CAAZ,CAAD,CAAf,EAAhB,CAAgD;AAChDb,IAAI,CAACc,UAAL,CAAkBJ,OAAO,CACrBV,IAAI,CAACe,SAAL,CAAeC,MAAf,CAAsB,SAACC,CAAD,CAAIC,CAAJ,QAAUD,CAAAA,CAAC,CAAGC,CAAC,CAACC,GAAF,CAAQD,CAAC,CAACE,KAAxB,EAAtB,CAAqD,CAArD,CADqB,CAAzB,CAEApB,IAAI,CAACqB,aAAL,CAAqBrB,IAAI,CAACc,UAAL,CAAkB,GAAlB,CAAwBJ,OAAO,CAAC,CAAD,CAA/B,CAAqCA,OAAO,CAAC,EAAD,CAAjE,CACAV,IAAI,CAACsB,QAAL,CAAgBZ,OAAO,CAAC,KAAOV,IAAI,CAACc,UAAb,CAAvB,CACAd,IAAI,CAACuB,UAAL,CAAkBvB,IAAI,CAACc,UAAL,CAAkBd,IAAI,CAACqB,aAAvB,CAAuCrB,IAAI,CAACsB,QAA9D,CACA,GAAME,CAAAA,QAAQ,CAAGlC,WAAW,EAA5B,CACA,GAAMmC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,EAAM,CAC5BD,QAAQ,CAAC/B,WAAW,gCAAMO,IAAN,MAAY0B,UAAU,CAAE1B,IAAI,CAACe,SAA7B,GAAZ,CAAR,CACH,CAFD,CAGA1B,SAAS,CAAC,UAAM,CACZ,GAAIkB,OAAJ,CAAa,CACTR,KAAK,CAACI,OAAN,CAAcC,IAAd,iBAA4BK,KAAK,CAACkB,GAAlC,GACAH,QAAQ,CAAC,CAAEI,IAAI,CAAE/B,kBAAR,CAAD,CAAR,CACH,CACJ,CALQ,CAKN,CAAC2B,QAAD,CAAWf,KAAX,CAAkBV,KAAK,CAACI,OAAxB,CAAiCI,OAAjC,CALM,CAAT,CAMA,mBACI,4CACI,oBAAC,aAAD,EAAe,KAAK,KAApB,CAAqB,KAAK,KAA1B,CAA2B,KAAK,KAAhC,CAAiC,KAAK,KAAtC,EADJ,cAEI,2BAAK,SAAS,CAAC,SAAf,eACI,2BAAK,SAAS,CAAC,OAAf,eACI,2CACI,2CACI,2BAAK,SAAS,CAAC,iBAAf,eACI,yCADJ,cAEI,0CACI,0CADJ,KAC4BP,IAAI,CAAC6B,eAAL,CAAqBC,QADjD,kBAC2D,8BAD3D,cAEI,6CAFJ,KAE+B9B,IAAI,CAAC6B,eAAL,CAAqBE,OAFpD,KAGK/B,IAAI,CAAC6B,eAAL,CAAqBG,IAH1B,MAGkChC,IAAI,CAAC6B,eAAL,CAAqBI,UAHvD,KAIKjC,IAAI,CAAC6B,eAAL,CAAqBK,OAJ1B,CAFJ,CADJ,CADJ,cAYI,2CACI,2BAAK,SAAS,CAAC,iBAAf,eACI,wCADJ,cAEI,0CACI,4CADJ,KAC8BlC,IAAI,CAACE,aADnC,CAFJ,CADJ,CAZJ,cAoBI,2CACI,2BAAK,SAAS,CAAC,iBAAf,eACI,4CADJ,cAEI,8BACKF,IAAI,CAACe,SAAL,CAAeoB,GAAf,CAAmB,SAACC,IAAD,qBAChB,0BAAI,GAAG,CAAEA,IAAI,CAACC,OAAd,eACI,2BAAK,SAAS,CAAC,KAAf,eACI,4CACI,2BACI,GAAG,CAAED,IAAI,CAACE,KADd,CAEI,GAAG,CAAEF,IAAI,CAACG,IAFd,CAGI,SAAS,CAAC,OAHd,EADJ,CADJ,cAOI,2BAAK,SAAS,CAAC,QAAf,eACI,oBAAC,IAAD,EAAM,EAAE,oBAAcH,IAAI,CAACC,OAAnB,CAAR,EAAuCD,IAAI,CAACG,IAA5C,CADJ,CAPJ,cAWI,+BACKH,IAAI,CAACjB,GADV,QACmBiB,IAAI,CAAChB,KADxB,QACmCgB,IAAI,CAACjB,GAAL,CAAWiB,IAAI,CAAChB,KADnD,CAXJ,CADJ,CADgB,EAAnB,CADL,CAFJ,CADJ,CApBJ,CADJ,CADJ,cAsDI,2BAAK,SAAS,CAAC,OAAf,eACI,2BAAK,SAAS,CAAC,gBAAf,eACI,2CACI,2CACI,8CADJ,CADJ,cAII,2CACI,2BAAK,SAAS,CAAC,KAAf,eACI,uCADJ,cAEI,mCAAOpB,IAAI,CAACc,UAAL,CAAgBD,OAAhB,CAAwB,CAAxB,CAAP,CAFJ,CADJ,CAJJ,cAUI,2CACI,2BAAK,SAAS,CAAC,KAAf,eACI,0CADJ,cAEI,mCAAOb,IAAI,CAACqB,aAAL,CAAmBR,OAAnB,CAA2B,CAA3B,CAAP,CAFJ,CADJ,CAVJ,6CAeqC,2CAC7B,2BAAK,SAAS,CAAC,KAAf,eACI,uCADJ,cAEI,mCAAOb,IAAI,CAACsB,QAAL,CAAcT,OAAd,CAAsB,CAAtB,CAAP,CAFJ,CAD6B,CAfrC,cAqBI,2CACI,2BAAK,SAAS,CAAC,KAAf,eACI,4CAAK,gDAAL,CADJ,cAEI,gDAAM,sCAAUb,IAAI,CAACuB,UAAL,CAAgBV,OAAhB,CAAwB,CAAxB,CAAV,CAAN,CAFJ,CADJ,CArBJ,cA2BI,2CACI,8BAAQ,IAAI,CAAC,QAAb,CACI,OAAO,CAAEY,iBADb,CAEI,SAAS,CAAC,eAFd,CAGI,QAAQ,CAAEzB,IAAI,CAACe,SAAL,CAAeyB,MAAf,GAA0B,CAHxC,gBADJ,CA3BJ,CAmCvBlC,OAAO,eAAI,oBAAC,UAAD,MAnCY,CAoCvBE,KAAK,eAAI,oBAAC,UAAD,EAAY,OAAO,CAAC,QAApB,EAA8BA,KAA9B,CApCc,CADJ,CADJ,CAtDJ,CAFJ,CADJ,CAuGH,CAED,cAAeV,CAAAA,gBAAf","sourcesContent":["import React, { useEffect } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { Link } from 'react-router-dom'\nimport { createOrder } from '../actions/orderActions'\nimport CheckoutSteps from '../components/CheckoutSteps'\nimport LoadingBox from '../components/LoadingBox'\nimport MessageBox from '../components/MessageBox'\nimport { ORDER_CREATE_RESET } from '../constants/orderConstants'\n\nfunction PlaceOrderScreen(props) {\n    const cart = useSelector((state) => state.cart)\n    if (!cart.paymentMethod) {\n        props.history.push('/payment')\n    }\n    const orderCreate = useSelector((state) => state.orderCreate);\n    const { loading, success, error, order } = orderCreate\n    const toPrice = (num) => Number(num.toFixed(2));//5.123=>string\"5.12\"=>number 5.12 \n    cart.itemsPrice = toPrice(\n        cart.cartItems.reduce((a, c) => a + c.qty * c.price, 0));\n    cart.shippingPrice = cart.itemsPrice > 100 ? toPrice(0) : toPrice(10);\n    cart.taxPrice = toPrice(0.10 * cart.itemsPrice);\n    cart.totalPrice = cart.itemsPrice + cart.shippingPrice + cart.taxPrice;\n    const dispatch = useDispatch();\n    const placeorderHandler = () => {\n        dispatch(createOrder({ ...cart, orderItems: cart.cartItems }));\n    };\n    useEffect(() => {\n        if (success) {\n            props.history.push(`/order${order._id}`);\n            dispatch({ type: ORDER_CREATE_RESET });\n        }\n    }, [dispatch, order, props.history, success]);\n    return (\n        <div>\n            <CheckoutSteps step1 step2 step3 step4></CheckoutSteps>\n            <div className=\"row top\">\n                <div className=\"col-2\">\n                    <ul>\n                        <li>\n                            <div className=\"card  card-body\">\n                                <h2>Shipping</h2>\n                                <p>\n                                    <strong>Name:</strong> {cart.shippingAddress.fullName} <br />\n                                    <strong>Address:</strong> {cart.shippingAddress.address},\n                                    {cart.shippingAddress.city}, {cart.shippingAddress.postalcode},\n                                    {cart.shippingAddress.country}\n                                </p>\n                            </div>\n                        </li>\n                        <li>\n                            <div className=\"card  card-body\">\n                                <h2>Payment</h2>\n                                <p>\n                                    <strong>Method:</strong> {cart.paymentMethod}\n                                </p>\n                            </div>\n                        </li>\n                        <li>\n                            <div className=\"card  card-body\">\n                                <h2>Order Items</h2>\n                                <ul>\n                                    {cart.cartItems.map((item) => (\n                                        <li key={item.product}>\n                                            <div className=\"row\">\n                                                <div>\n                                                    <img\n                                                        src={item.image}\n                                                        alt={item.name}\n                                                        className=\"small\"></img>\n                                                </div>\n                                                <div className=\"min-30\">\n                                                    <Link to={`/product/${item.product}`}>{item.name}</Link>\n                                                </div>\n\n                                                <div>\n                                                    {item.qty} x ${item.price} = ${item.qty * item.price}\n                                                </div>\n\n                                            </div>\n                                        </li>\n                                    ))}\n                                </ul>\n\n                            </div>\n                        </li>\n\n\n                    </ul>\n                </div>\n                <div className=\"col-1\">\n                    <div className=\"card card-body\">\n                        <ul>\n                            <li>\n                                <h2>Order Summary</h2>\n                            </li>\n                            <li>\n                                <div className=\"row\">\n                                    <div>Items</div>\n                                    <div>${cart.itemsPrice.toFixed(2)}</div>\n                                </div>\n                            </li>\n                            <li>\n                                <div className=\"row\">\n                                    <div>Shipping</div>\n                                    <div>${cart.shippingPrice.toFixed(2)}</div>\n                                </div>\n                            </li>                            <li>\n                                <div className=\"row\">\n                                    <div>Taxes</div>\n                                    <div>${cart.taxPrice.toFixed(2)}</div>\n                                </div>\n                            </li>\n                            <li>\n                                <div className=\"row\">\n                                    <div><strong>Order Total</strong></div>\n                                    <div> <strong>${cart.totalPrice.toFixed(2)}</strong></div>\n                                </div>\n                            </li>\n                            <li>\n                                <button type=\"button\"\n                                    onClick={placeorderHandler}\n                                    className=\"primary block\"\n                                    disabled={cart.cartItems.length === 0}>\n                                    Place Order\n                                </button>\n                            </li>\n{loading && <LoadingBox></LoadingBox>}\n{error && <MessageBox variant=\"danger\">{error}</MessageBox>}\n\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default PlaceOrderScreen\n"]},"metadata":{},"sourceType":"module"}