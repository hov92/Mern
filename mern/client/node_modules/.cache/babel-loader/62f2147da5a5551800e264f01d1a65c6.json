{"ast":null,"code":"var _jsxFileName = \"/Users/dwaynehovington/Desktop/Mern/mern/client/src/screens/SearchScreen.js\";\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link, useParams } from 'react-router-dom';\nimport { listProducts } from '../actions/productActions';\nimport LoadingBox from '../components/LoadingBox';\nimport MessageBox from '../components/MessageBox';\nimport Product from '../components/Product';\nimport Rating from '../components/Rating';\nimport { prices, ratings } from 'mern/server/utils.js';\nexport default function SearchScreen(props) {\n  const {\n    name = 'all',\n    category = 'all',\n    min = 0,\n    max = 0,\n    rating = 0,\n    order = 'newest',\n    pageNumber = 1\n  } = useParams();\n  const dispatch = useDispatch();\n  const productList = useSelector(state => state.productList);\n  const {\n    loading,\n    error,\n    products,\n    page,\n    pages\n  } = productList;\n  const productCategoryList = useSelector(state => state.productCategoryList);\n  const {\n    loading: loadingCategories,\n    error: errorCategories,\n    categories\n  } = productCategoryList;\n  useEffect(() => {\n    dispatch(listProducts({\n      pageNumber,\n      name: name !== 'all' ? name : '',\n      category: category !== 'all' ? category : '',\n      min,\n      max,\n      rating,\n      order\n    }));\n  }, [category, dispatch, max, min, name, order, rating, pageNumber]);\n\n  const getFilterUrl = filter => {\n    const filterPage = filter.page || pageNumber;\n    const filterCategory = filter.category || category;\n    const filterName = filter.name || name;\n    const filterRating = filter.rating || rating;\n    const sortOrder = filter.order || order;\n    const filterMin = filter.min ? filter.min : filter.min === 0 ? 0 : min;\n    const filterMax = filter.max ? filter.max : filter.max === 0 ? 0 : max;\n    return `/search/category/${filterCategory}/name/${filterName}/min/${filterMin}/max/${filterMax}/rating/${filterRating}/order/${sortOrder}/pageNumber/${filterPage}`;\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }\n  }, loading ? /*#__PURE__*/React.createElement(LoadingBox, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 21\n    }\n  }) : error ? /*#__PURE__*/React.createElement(MessageBox, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 21\n    }\n  }, error) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 29\n    }\n  }, products.length, \" Results\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 17\n    }\n  }, \"Sort by\", ' ', /*#__PURE__*/React.createElement(\"select\", {\n    value: order,\n    onChange: e => {\n      props.history.push(getFilterUrl({\n        order: e.target.value\n      }));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"newest\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 25\n    }\n  }, \"Newest Arrivals\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"lowest\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 25\n    }\n  }, \"Price: Low to High\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"highest\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 25\n    }\n  }, \"Price: High to Low\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"toprated\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 25\n    }\n  }, \"Avg. Customer Reviews\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row top\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 21\n    }\n  }, \"Department\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 21\n    }\n  }, loadingCategories ? /*#__PURE__*/React.createElement(LoadingBox, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 29\n    }\n  }) : errorCategories ? /*#__PURE__*/React.createElement(MessageBox, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 29\n    }\n  }, errorCategories) : /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    className: 'all' === category ? 'active' : '',\n    to: getFilterUrl({\n      category: 'all'\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 45\n    }\n  }, \"Any\")), categories.map(c => /*#__PURE__*/React.createElement(\"li\", {\n    key: c,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    className: c === category ? 'active' : '',\n    to: getFilterUrl({\n      category: c\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 49\n    }\n  }, c))))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 25\n    }\n  }, \"Price\"), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 25\n    }\n  }, prices.map(p => /*#__PURE__*/React.createElement(\"li\", {\n    key: p.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: getFilterUrl({\n      min: p.min,\n      max: p.max\n    }),\n    className: `${p.min}-${p.max}` === `${min}-${max}` ? 'active' : '',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 37\n    }\n  }, p.name))))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 25\n    }\n  }, \"Avg. Customer Review\"), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 25\n    }\n  }, ratings.map(r => /*#__PURE__*/React.createElement(\"li\", {\n    key: r.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: getFilterUrl({\n      rating: r.rating\n    }),\n    className: `${r.rating}` === `${rating}` ? 'active' : '',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(Rating, {\n    caption: ' & up',\n    rating: r.rating,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 41\n    }\n  }))))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 17\n    }\n  }, loading ? /*#__PURE__*/React.createElement(LoadingBox, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 25\n    }\n  }) : error ? /*#__PURE__*/React.createElement(MessageBox, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 25\n    }\n  }, error) : /*#__PURE__*/React.createElement(React.Fragment, null, products.length === 0 && /*#__PURE__*/React.createElement(MessageBox, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 41\n    }\n  }, \"No Product Found\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 37\n    }\n  }, products.map(product => /*#__PURE__*/React.createElement(Product, {\n    key: product._id,\n    product: product,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 45\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row center pagination\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 37\n    }\n  }, [...Array(pages).keys()].map(x => /*#__PURE__*/React.createElement(Link, {\n    className: x + 1 === page ? 'active' : '',\n    key: x + 1,\n    to: getFilterUrl({\n      page: x + 1\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 45\n    }\n  }, x + 1)))))));\n}","map":{"version":3,"sources":["/Users/dwaynehovington/Desktop/Mern/mern/client/src/screens/SearchScreen.js"],"names":["React","useEffect","useDispatch","useSelector","Link","useParams","listProducts","LoadingBox","MessageBox","Product","Rating","prices","ratings","SearchScreen","props","name","category","min","max","rating","order","pageNumber","dispatch","productList","state","loading","error","products","page","pages","productCategoryList","loadingCategories","errorCategories","categories","getFilterUrl","filter","filterPage","filterCategory","filterName","filterRating","sortOrder","filterMin","filterMax","length","e","history","push","target","value","map","c","p","r","product","_id","Array","keys","x"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link, useParams } from 'react-router-dom';\nimport { listProducts } from '../actions/productActions';\nimport LoadingBox from '../components/LoadingBox';\nimport MessageBox from '../components/MessageBox';\nimport Product from '../components/Product';\nimport Rating from '../components/Rating';\nimport { prices, ratings } from 'mern/server/utils.js';\n\nexport default function SearchScreen(props) {\n    const {\n        name = 'all',\n        category = 'all',\n        min = 0,\n        max = 0,\n        rating = 0,\n        order = 'newest',\n        pageNumber = 1,\n    } = useParams();\n    const dispatch = useDispatch();\n    const productList = useSelector((state) => state.productList);\n    const { loading, error, products, page, pages } = productList;\n\n    const productCategoryList = useSelector((state) => state.productCategoryList);\n    const {\n        loading: loadingCategories,\n        error: errorCategories,\n        categories,\n    } = productCategoryList;\n    useEffect(() => {\n        dispatch(\n            listProducts({\n                pageNumber,\n                name: name !== 'all' ? name : '',\n                category: category !== 'all' ? category : '',\n                min,\n                max,\n                rating,\n                order,\n            })\n        );\n    }, [category, dispatch, max, min, name, order, rating, pageNumber]);\n\n    const getFilterUrl = (filter) => {\n        const filterPage = filter.page || pageNumber;\n        const filterCategory = filter.category || category;\n        const filterName = filter.name || name;\n        const filterRating = filter.rating || rating;\n        const sortOrder = filter.order || order;\n        const filterMin = filter.min ? filter.min : filter.min === 0 ? 0 : min;\n        const filterMax = filter.max ? filter.max : filter.max === 0 ? 0 : max;\n        return `/search/category/${filterCategory}/name/${filterName}/min/${filterMin}/max/${filterMax}/rating/${filterRating}/order/${sortOrder}/pageNumber/${filterPage}`;\n    };\n    return (\n        <div>\n            <div className=\"row\">\n                {loading ? (\n                    <LoadingBox></LoadingBox>\n                ) : error ? (\n                    <MessageBox variant=\"danger\">{error}</MessageBox>\n                ) : (\n                            <div>{products.length} Results</div>\n                        )}\n                <div>\n                    Sort by{' '}\n                    <select\n                        value={order}\n                        onChange={(e) => {\n                            props.history.push(getFilterUrl({ order: e.target.value }));\n                        }}\n                    >\n                        <option value=\"newest\">Newest Arrivals</option>\n                        <option value=\"lowest\">Price: Low to High</option>\n                        <option value=\"highest\">Price: High to Low</option>\n                        <option value=\"toprated\">Avg. Customer Reviews</option>\n                    </select>\n                </div>\n            </div>\n            <div className=\"row top\">\n                <div className=\"col-1\">\n                    <h3>Department</h3>\n                    <div>\n                        {loadingCategories ? (\n                            <LoadingBox></LoadingBox>\n                        ) : errorCategories ? (\n                            <MessageBox variant=\"danger\">{errorCategories}</MessageBox>\n                        ) : (\n                                    <ul>\n                                        <li>\n                                            <Link\n                                                className={'all' === category ? 'active' : ''}\n                                                to={getFilterUrl({ category: 'all' })}\n                                            >\n                                                Any\n                  </Link>\n                                        </li>\n                                        {categories.map((c) => (\n                                            <li key={c}>\n                                                <Link\n                                                    className={c === category ? 'active' : ''}\n                                                    to={getFilterUrl({ category: c })}\n                                                >\n                                                    {c}\n                                                </Link>\n                                            </li>\n                                        ))}\n                                    </ul>\n                                )}\n                    </div>\n                    <div>\n                        <h3>Price</h3>\n                        <ul>\n                            {prices.map((p) => (\n                                <li key={p.name}>\n                                    <Link\n                                        to={getFilterUrl({ min: p.min, max: p.max })}\n                                        className={\n                                            `${p.min}-${p.max}` === `${min}-${max}` ? 'active' : ''\n                                        }\n                                    >\n                                        {p.name}\n                                    </Link>\n                                </li>\n                            ))}\n                        </ul>\n                    </div>\n                    <div>\n                        <h3>Avg. Customer Review</h3>\n                        <ul>\n                            {ratings.map((r) => (\n                                <li key={r.name}>\n                                    <Link\n                                        to={getFilterUrl({ rating: r.rating })}\n                                        className={`${r.rating}` === `${rating}` ? 'active' : ''}\n                                    >\n                                        <Rating caption={' & up'} rating={r.rating}></Rating>\n                                    </Link>\n                                </li>\n                            ))}\n                        </ul>\n                    </div>\n                </div>\n                <div className=\"col-3\">\n                    {loading ? (\n                        <LoadingBox></LoadingBox>\n                    ) : error ? (\n                        <MessageBox variant=\"danger\">{error}</MessageBox>\n                    ) : (\n                                <>\n                                    {products.length === 0 && (\n                                        <MessageBox>No Product Found</MessageBox>\n                                    )}\n                                    <div className=\"row center\">\n                                        {products.map((product) => (\n                                            <Product key={product._id} product={product}></Product>\n                                        ))}\n                                    </div>\n                                    <div className=\"row center pagination\">\n                                        {[...Array(pages).keys()].map((x) => (\n                                            <Link\n                                                className={x + 1 === page ? 'active' : ''}\n                                                key={x + 1}\n                                                to={getFilterUrl({ page: x + 1 })}\n                                            >\n                                                {x + 1}\n                                            </Link>\n                                        ))}\n                                    </div>\n                                </>\n                            )}\n                </div>\n            </div>\n        </div>\n    );\n}"]},"metadata":{},"sourceType":"module"}