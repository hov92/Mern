{"ast":null,"code":"var _jsxFileName = \"/Users/dwaynehovington/Desktop/Mern/mern/client/src/screens/OrderScreen.js\";\nimport React, { useEffect, useState } from 'react';\nimport { PayPalButton } from 'react-paypal-button-v2';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport Axios from 'axios';\nimport { detailsOrder, payOrder } from '../actions/orderActions';\nimport LoadingBox from '../components/LoadingBox';\nimport MessageBox from '../components/MessageBox';\nimport { ORDER_PAY_RESET } from '../constants/orderConstants';\n\nfunction OrderScreen(props) {\n  const orderId = props.match.params.id;\n  const [sdkReady, setSdkReady] = useState(false);\n  const orderDetails = useSelector(state => state.orderDetails);\n  const {\n    order,\n    loading,\n    error\n  } = orderDetails;\n  const orderPay = useSelector(state => state.orderPay);\n  const {\n    loading: loadingPay,\n    error: errorPay,\n    success: successPay\n  } = orderPay;\n  const dispatch = useDispatch();\n  useEffect(() => {\n    const addPayPalScript = async () => {\n      const {\n        data\n      } = await Axios.get('/api/config/paypal');\n      const script = document.createElement('script');\n      script.type = \"text/javascript\";\n      script.src = `https://www.paypal.com/sdk/js?client-id=${data}`;\n      script.async = true;\n\n      script.onload = () => {\n        setSdkReady(true);\n      };\n\n      document.body.appendChild(script);\n    };\n\n    if (!order || successPay || order && order._id !== orderId) {\n      dispatch({\n        type: ORDER_PAY_RESET\n      });\n      dispatch(detailsOrder(orderId));\n    } else {\n      if (!order.isPaid) {\n        if (!window.paypal) {\n          addPayPalScript();\n        } else {\n          setSdkReady(true);\n        }\n      }\n    }\n  }, [dispatch, order, orderId, sdkReady]);\n\n  const succesPaymentHandler = paymentResult => {\n    dispatch(payOrder(order, paymentResult));\n  };\n\n  return loading ? /*#__PURE__*/React.createElement(LoadingBox, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 23\n    }\n  }) : error ? /*#__PURE__*/React.createElement(MessageBox, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 18\n    }\n  }, error) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 21\n    }\n  }, \"Order \", order._id), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row top\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card  card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 41\n    }\n  }, \"Shipping\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 45\n    }\n  }, \"Name:\"), \" \", order.shippingAddress.fullName, \" \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 101\n    }\n  }), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 45\n    }\n  }, \"Address:\"), \" \", order.shippingAddress.address, \",\", order.shippingAddress.city, \", \", order.shippingAddress.postalcode, \",\", order.shippingAddress.country), order.isDelivered ? /*#__PURE__*/React.createElement(MessageBox, {\n    variant: \"success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 45\n    }\n  }, \"Delivered at \", order.deliveredAt) : /*#__PURE__*/React.createElement(MessageBox, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 48\n    }\n  }, \"Not Delivered\"))), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card  card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 41\n    }\n  }, \"Payment\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 45\n    }\n  }, \"Method:\"), \" \", order.paymentMethod), order.isPaid ? /*#__PURE__*/React.createElement(MessageBox, {\n    variant: \"success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 45\n    }\n  }, \"Paid at \", order.paidAt) : /*#__PURE__*/React.createElement(MessageBox, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 48\n    }\n  }, \"Not Paid\"))), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card  card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 41\n    }\n  }, \"Order Items\"), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 41\n    }\n  }, order.orderItems.map(item => /*#__PURE__*/React.createElement(\"li\", {\n    key: item.product,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 53\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 57\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: item.image,\n    alt: item.name,\n    className: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 61\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"min-30\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 57\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: `/product/${item.product}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 61\n    }\n  }, item.name)), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 57\n    }\n  }, item.qty, \" x $\", item.price, \" = $\", item.qty * item.price))))))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 41\n    }\n  }, \"Order Summary\")), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 45\n    }\n  }, \"Items\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 45\n    }\n  }, \"$\", order.itemsPrice.toFixed(2)))), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 45\n    }\n  }, \"Shipping\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 45\n    }\n  }, \"$\", order.shippingPrice.toFixed(2)))), \"                            \", /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 70\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 45\n    }\n  }, \"Taxes\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 45\n    }\n  }, \"$\", order.taxPrice.toFixed(2)))), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 50\n    }\n  }, \"Order Total\")), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 45\n    }\n  }, \" \", /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 51\n    }\n  }, \"$\", order.totalPrice.toFixed(2))))), !order.isPaid && /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 45\n    }\n  }, !sdkReady ? /*#__PURE__*/React.createElement(LoadingBox, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 63\n    }\n  }) : /*#__PURE__*/React.createElement(React.Fragment, null, errorPay && /*#__PURE__*/React.createElement(MessageBox, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 71\n    }\n  }), loadingPay && /*#__PURE__*/React.createElement(LoadingBox, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 72\n    }\n  }), /*#__PURE__*/React.createElement(PayPalButton, {\n    amount: order.totalPrice,\n    onSuccess: succesPaymentHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 57\n    }\n  }))))))));\n}\n\nexport default OrderScreen;","map":{"version":3,"sources":["/Users/dwaynehovington/Desktop/Mern/mern/client/src/screens/OrderScreen.js"],"names":["React","useEffect","useState","PayPalButton","useDispatch","useSelector","Link","Axios","detailsOrder","payOrder","LoadingBox","MessageBox","ORDER_PAY_RESET","OrderScreen","props","orderId","match","params","id","sdkReady","setSdkReady","orderDetails","state","order","loading","error","orderPay","loadingPay","errorPay","success","successPay","dispatch","addPayPalScript","data","get","script","document","createElement","type","src","async","onload","body","appendChild","_id","isPaid","window","paypal","succesPaymentHandler","paymentResult","shippingAddress","fullName","address","city","postalcode","country","isDelivered","deliveredAt","paymentMethod","paidAt","orderItems","map","item","product","image","name","qty","price","itemsPrice","toFixed","shippingPrice","taxPrice","totalPrice"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { PayPalButton } from 'react-paypal-button-v2'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { Link } from 'react-router-dom'\nimport Axios from 'axios'\nimport { detailsOrder, payOrder } from '../actions/orderActions'\nimport LoadingBox from '../components/LoadingBox'\nimport MessageBox from '../components/MessageBox'\nimport { ORDER_PAY_RESET } from '../constants/orderConstants'\n\nfunction OrderScreen(props) {\n    const orderId = props.match.params.id;\n    const [sdkReady, setSdkReady] = useState(false);\n    const orderDetails = useSelector((state) => state.orderDetails)\n    const { order, loading, error } = orderDetails\n    const orderPay = useSelector((state) => state.orderPay);\n    const {loading: loadingPay, error: errorPay, success: successPay } = orderPay;\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        const addPayPalScript = async () => {\n            const { data } = await Axios.get('/api/config/paypal');\n            const script = document.createElement('script');\n            script.type = \"text/javascript\";\n            script.src = `https://www.paypal.com/sdk/js?client-id=${data}`;\n            script.async = true;\n            script.onload = () => {\n                setSdkReady(true);\n            };\n            document.body.appendChild(script);\n        };\n        if (!order || successPay || (order && order._id !== orderId)) {\n            dispatch({type: ORDER_PAY_RESET})\n            dispatch(detailsOrder(orderId))\n        } else {\n            if (!order.isPaid) {\n                if (!window.paypal) {\n                    addPayPalScript();\n                } else {\n                    setSdkReady(true);\n                }\n            }\n        }\n\n    }, [dispatch, order, orderId, sdkReady]);\n\n    const succesPaymentHandler = (paymentResult) => {\n        dispatch(payOrder(order, paymentResult));\n    }\n\n    return loading ? (<LoadingBox></LoadingBox>) :\n        error ? (<MessageBox variant=\"danger\">{error}</MessageBox>)\n            :\n            (\n                <div>\n                    <h1>Order {order._id}</h1>\n                    <div className=\"row top\">\n                        <div className=\"col-2\">\n                            <ul>\n                                <li>\n                                    <div className=\"card  card-body\">\n                                        <h2>Shipping</h2>\n                                        <p>\n                                            <strong>Name:</strong> {order.shippingAddress.fullName} <br />\n                                            <strong>Address:</strong> {order.shippingAddress.address},\n                                    {order.shippingAddress.city}, {order.shippingAddress.postalcode},\n                                    {order.shippingAddress.country}\n                                        </p>\n                                        {order.isDelivered ? (\n                                            <MessageBox variant=\"success\">\n                                                Delivered at {order.deliveredAt}</MessageBox>)\n                                            : (<MessageBox variant=\"danger\">Not Delivered</MessageBox>)}\n                                    </div>\n                                </li>\n\n                                <li>\n                                    <div className=\"card  card-body\">\n                                        <h2>Payment</h2>\n                                        <p>\n                                            <strong>Method:</strong> {order.paymentMethod}\n                                        </p>\n                                        {order.isPaid ? (\n                                            <MessageBox variant=\"success\">\n                                                Paid at {order.paidAt}</MessageBox>)\n                                            : (<MessageBox variant=\"danger\">Not Paid</MessageBox>)}\n\n                                    </div>\n                                </li>\n\n                                <li>\n                                    <div className=\"card  card-body\">\n                                        <h2>Order Items</h2>\n                                        <ul>\n                                            {order.orderItems.map((item) => (\n                                                <li key={item.product}>\n                                                    <div className=\"row\">\n                                                        <div>\n                                                            <img\n                                                                src={item.image}\n                                                                alt={item.name}\n                                                                className=\"small\"></img>\n                                                        </div>\n                                                        <div className=\"min-30\">\n                                                            <Link to={`/product/${item.product}`}>{item.name}</Link>\n                                                        </div>\n\n                                                        <div>\n                                                            {item.qty} x ${item.price} = ${item.qty * item.price}\n                                                        </div>\n\n                                                    </div>\n                                                </li>\n                                            ))}\n                                        </ul>\n\n                                    </div>\n                                </li>\n\n\n                            </ul>\n                        </div>\n                        <div className=\"col-1\">\n                            <div className=\"card card-body\">\n                                <ul>\n                                    <li>\n                                        <h2>Order Summary</h2>\n                                    </li>\n                                    <li>\n                                        <div className=\"row\">\n                                            <div>Items</div>\n                                            <div>${order.itemsPrice.toFixed(2)}</div>\n                                        </div>\n                                    </li>\n                                    <li>\n                                        <div className=\"row\">\n                                            <div>Shipping</div>\n                                            <div>${order.shippingPrice.toFixed(2)}</div>\n                                        </div>\n                                    </li>                            <li>\n                                        <div className=\"row\">\n                                            <div>Taxes</div>\n                                            <div>${order.taxPrice.toFixed(2)}</div>\n                                        </div>\n                                    </li>\n                                    <li>\n                                        <div className=\"row\">\n                                            <div><strong>Order Total</strong></div>\n                                            <div> <strong>${order.totalPrice.toFixed(2)}</strong></div>\n                                        </div>\n                                    </li>\n                                    {\n                                        !order.isPaid && (\n                                            <li>\n                                                {!sdkReady ? (<LoadingBox></LoadingBox>) :\n                                                    (\n                                                        <>\n                                                        {errorPay && (<MessageBox variant=\"danger\"></MessageBox>)}\n                                                        {loadingPay && <LoadingBox></LoadingBox>}\n                                                        <PayPalButton amount={order.totalPrice}\n                                                            onSuccess={succesPaymentHandler}>\n                                                        </PayPalButton>\n                                                        </>\n                                                    )}\n                                            </li>\n                                        )\n                                    }\n                                </ul>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            )\n}\n\nexport default OrderScreen\n"]},"metadata":{},"sourceType":"module"}