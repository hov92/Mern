{"ast":null,"code":"import _toConsumableArray from\"/Users/dwaynehovington/Desktop/Mern/mern/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Link,useParams}from'react-router-dom';import{listProducts}from'../actions/productActions';import LoadingBox from'../components/LoadingBox';import MessageBox from'../components/MessageBox';import Product from'../components/Product';import Rating from'../components/Rating';import{prices,ratings}from'../utils';function SearchScreen(props){var _useParams=useParams(),_useParams$name=_useParams.name,name=_useParams$name===void 0?'all':_useParams$name,_useParams$category=_useParams.category,category=_useParams$category===void 0?'all':_useParams$category,_useParams$min=_useParams.min,min=_useParams$min===void 0?0:_useParams$min,_useParams$max=_useParams.max,max=_useParams$max===void 0?0:_useParams$max,_useParams$rating=_useParams.rating,rating=_useParams$rating===void 0?0:_useParams$rating,_useParams$order=_useParams.order,order=_useParams$order===void 0?'newest':_useParams$order,_useParams$pageNumber=_useParams.pageNumber,pageNumber=_useParams$pageNumber===void 0?1:_useParams$pageNumber;var dispatch=useDispatch();var productList=useSelector(function(state){return state.productList;});var loading=productList.loading,error=productList.error,products=productList.products,page=productList.page,pages=productList.pages;var productCategoryList=useSelector(function(state){return state.productCategoryList;});var loadingCategories=productCategoryList.loading,errorCategories=productCategoryList.error,categories=productCategoryList.categories;useEffect(function(){dispatch(listProducts({pageNumber:pageNumber,name:name!=='all'?name:'',category:category!=='all'?category:'',min:min,max:max,rating:rating,order:order}));},[category,dispatch,max,min,name,order,rating,pageNumber]);var getFilterUrl=function getFilterUrl(filter){var filterPage=filter.page||pageNumber;var filterCategory=filter.category||category;var filterName=filter.name||name;var filterRating=filter.rating||rating;var sortOrder=filter.order||order;var filterMin=filter.min?filter.min:filter.min===0?0:min;var filterMax=filter.max?filter.max:filter.max===0?0:max;return\"/search/category/\".concat(filterCategory,\"/name/\").concat(filterName,\"/min/\").concat(filterMin,\"/max/\").concat(filterMax,\"/rating/\").concat(filterRating,\"/order/\").concat(sortOrder,\"/pageNumber/\").concat(filterPage);};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},loading?/*#__PURE__*/React.createElement(LoadingBox,null):error?/*#__PURE__*/React.createElement(MessageBox,{variant:\"danger\"},error):/*#__PURE__*/React.createElement(\"div\",null,products.length,\" Results\"),/*#__PURE__*/React.createElement(\"div\",null,\"Sort by\",' ',/*#__PURE__*/React.createElement(\"select\",{value:order,onChange:function onChange(e){props.history.push(getFilterUrl({order:e.target.value}));}},/*#__PURE__*/React.createElement(\"option\",{value:\"newest\"},\"Newest Arrivals\"),/*#__PURE__*/React.createElement(\"option\",{value:\"lowest\"},\"Price: Low to High\"),/*#__PURE__*/React.createElement(\"option\",{value:\"highest\"},\"Price: High to Low\"),/*#__PURE__*/React.createElement(\"option\",{value:\"toprated\"},\"Avg. Customer Reviews\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"row top\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-1\"},/*#__PURE__*/React.createElement(\"h3\",null,\"Department\"),/*#__PURE__*/React.createElement(\"div\",null,loadingCategories?/*#__PURE__*/React.createElement(LoadingBox,null):errorCategories?/*#__PURE__*/React.createElement(MessageBox,{variant:\"danger\"},errorCategories):/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(Link,{className:'all'===category?'active':'',to:getFilterUrl({category:'all'})},\"Any\")),categories.map(function(c){return/*#__PURE__*/React.createElement(\"li\",{key:c},/*#__PURE__*/React.createElement(Link,{className:c===category?'active':'',to:getFilterUrl({category:c})},c));}))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Price\"),/*#__PURE__*/React.createElement(\"ul\",null,prices.map(function(p){return/*#__PURE__*/React.createElement(\"li\",{key:p.name},/*#__PURE__*/React.createElement(Link,{to:getFilterUrl({min:p.min,max:p.max}),className:\"\".concat(p.min,\"-\").concat(p.max)===\"\".concat(min,\"-\").concat(max)?'active':''},p.name));}))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Avg. Customer Review\"),/*#__PURE__*/React.createElement(\"ul\",null,ratings.map(function(r){return/*#__PURE__*/React.createElement(\"li\",{key:r.name},/*#__PURE__*/React.createElement(Link,{to:getFilterUrl({rating:r.rating}),className:\"\".concat(r.rating)===\"\".concat(rating)?'active':''},/*#__PURE__*/React.createElement(Rating,{caption:' & up',rating:r.rating})));})))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-3\"},loading?/*#__PURE__*/React.createElement(LoadingBox,null):error?/*#__PURE__*/React.createElement(MessageBox,{variant:\"danger\"},error):/*#__PURE__*/React.createElement(React.Fragment,null,products.length===0&&/*#__PURE__*/React.createElement(MessageBox,null,\"No Product Found\"),/*#__PURE__*/React.createElement(\"div\",{className:\"row center\"},products.map(function(product){return/*#__PURE__*/React.createElement(Product,{key:product._id,product:product});})),/*#__PURE__*/React.createElement(\"div\",{className:\"row center pagination\"},_toConsumableArray(Array(pages).keys()).map(function(x){return/*#__PURE__*/React.createElement(Link,{className:x+1===page?'active':'',key:x+1,to:getFilterUrl({page:x+1})},x+1);}))))));}export default SearchScreen;","map":{"version":3,"sources":["/Users/dwaynehovington/Desktop/Mern/mern/client/src/screens/SearchScreen.js"],"names":["React","useEffect","useDispatch","useSelector","Link","useParams","listProducts","LoadingBox","MessageBox","Product","Rating","prices","ratings","SearchScreen","props","name","category","min","max","rating","order","pageNumber","dispatch","productList","state","loading","error","products","page","pages","productCategoryList","loadingCategories","errorCategories","categories","getFilterUrl","filter","filterPage","filterCategory","filterName","filterRating","sortOrder","filterMin","filterMax","length","e","history","push","target","value","map","c","p","r","product","_id","Array","keys","x"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link, useParams } from 'react-router-dom';\nimport { listProducts } from '../actions/productActions';\nimport LoadingBox from '../components/LoadingBox';\nimport MessageBox from '../components/MessageBox';\nimport Product from '../components/Product';\nimport Rating from '../components/Rating';\nimport { prices, ratings } from '../utils';\n\nfunction SearchScreen(props) {\n    const {\n        name = 'all',\n        category = 'all',\n        min = 0,\n        max = 0,\n        rating = 0,\n        order = 'newest',\n        pageNumber = 1,\n    } = useParams();\n    const dispatch = useDispatch();\n    const productList = useSelector((state) => state.productList);\n    const { loading, error, products, page, pages } = productList;\n\n    const productCategoryList = useSelector((state) => state.productCategoryList);\n    const {\n        loading: loadingCategories,\n        error: errorCategories,\n        categories,\n    } = productCategoryList;\n    useEffect(() => {\n        dispatch(\n            listProducts({\n                pageNumber,\n                name: name !== 'all' ? name : '',\n                category: category !== 'all' ? category : '',\n                min,\n                max,\n                rating,\n                order,\n            })\n        );\n    }, [category, dispatch, max, min, name, order, rating, pageNumber]);\n\n    const getFilterUrl = (filter) => {\n        const filterPage = filter.page || pageNumber;\n        const filterCategory = filter.category || category;\n        const filterName = filter.name || name;\n        const filterRating = filter.rating || rating;\n        const sortOrder = filter.order || order;\n        const filterMin = filter.min ? filter.min : filter.min === 0 ? 0 : min;\n        const filterMax = filter.max ? filter.max : filter.max === 0 ? 0 : max;\n        return `/search/category/${filterCategory}/name/${filterName}/min/${filterMin}/max/${filterMax}/rating/${filterRating}/order/${sortOrder}/pageNumber/${filterPage}`;\n    };\n    return (\n        <div>\n            <div className=\"row\">\n                {loading ? (\n                    <LoadingBox></LoadingBox>\n                ) : error ? (\n                    <MessageBox variant=\"danger\">{error}</MessageBox>\n                ) : (\n                            <div>{products.length} Results</div>\n                        )}\n                <div>\n                    Sort by{' '}\n                    <select\n                        value={order}\n                        onChange={(e) => {\n                            props.history.push(getFilterUrl({ order: e.target.value }));\n                        }}\n                    >\n                        <option value=\"newest\">Newest Arrivals</option>\n                        <option value=\"lowest\">Price: Low to High</option>\n                        <option value=\"highest\">Price: High to Low</option>\n                        <option value=\"toprated\">Avg. Customer Reviews</option>\n                    </select>\n                </div>\n            </div>\n            <div className=\"row top\">\n                <div className=\"col-1\">\n                    <h3>Department</h3>\n                    <div>\n                        {loadingCategories ? (\n                            <LoadingBox></LoadingBox>\n                        ) : errorCategories ? (\n                            <MessageBox variant=\"danger\">{errorCategories}</MessageBox>\n                        ) : (\n                                    <ul>\n                                        <li>\n                                            <Link\n                                                className={'all' === category ? 'active' : ''}\n                                                to={getFilterUrl({ category: 'all' })}\n                                            >\n                                                Any\n                  </Link>\n                                        </li>\n                                        {categories.map((c) => (\n                                            <li key={c}>\n                                                <Link\n                                                    className={c === category ? 'active' : ''}\n                                                    to={getFilterUrl({ category: c })}\n                                                >\n                                                    {c}\n                                                </Link>\n                                            </li>\n                                        ))}\n                                    </ul>\n                                )}\n                    </div>\n                    <div>\n                        <h3>Price</h3>\n                        <ul>\n                            {prices.map((p) => (\n                                <li key={p.name}>\n                                    <Link\n                                        to={getFilterUrl({ min: p.min, max: p.max })}\n                                        className={\n                                            `${p.min}-${p.max}` === `${min}-${max}` ? 'active' : ''\n                                        }\n                                    >\n                                        {p.name}\n                                    </Link>\n                                </li>\n                            ))}\n                        </ul>\n                    </div>\n                    <div>\n                        <h3>Avg. Customer Review</h3>\n                        <ul>\n                            {ratings.map((r) => (\n                                <li key={r.name}>\n                                    <Link\n                                        to={getFilterUrl({ rating: r.rating })}\n                                        className={`${r.rating}` === `${rating}` ? 'active' : ''}\n                                    >\n                                        <Rating caption={' & up'} rating={r.rating}></Rating>\n                                    </Link>\n                                </li>\n                            ))}\n                        </ul>\n                    </div>\n                </div>\n                <div className=\"col-3\">\n                    {loading ? (\n                        <LoadingBox></LoadingBox>\n                    ) : error ? (\n                        <MessageBox variant=\"danger\">{error}</MessageBox>\n                    ) : (\n                                <>\n                                    {products.length === 0 && (\n                                        <MessageBox>No Product Found</MessageBox>\n                                    )}\n                                    <div className=\"row center\">\n                                        {products.map((product) => (\n                                            <Product key={product._id} product={product}></Product>\n                                        ))}\n                                    </div>\n                                    <div className=\"row center pagination\">\n                                        {[...Array(pages).keys()].map((x) => (\n                                            <Link\n                                                className={x + 1 === page ? 'active' : ''}\n                                                key={x + 1}\n                                                to={getFilterUrl({ page: x + 1 })}\n                                            >\n                                                {x + 1}\n                                            </Link>\n                                        ))}\n                                    </div>\n                                </>\n                            )}\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default SearchScreen"]},"metadata":{},"sourceType":"module"}